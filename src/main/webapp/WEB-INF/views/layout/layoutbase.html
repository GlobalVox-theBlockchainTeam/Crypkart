<!--
  ~ Copyright (c) 5/3/18 11:15 AM Bitwise Ventures
  ~ Author : Anand Panchal
  ~ Author Email : anand4686@gmail.com
  -->

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
    <!--<head th:fragment="htmlheadbase">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    &lt;!&ndash; The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags &ndash;&gt;
    <title th:text="${@localeHelper.getTitle(null,null)}">(title)</title>
    <meta name="description" content="<?php echo $settings['description']; ?>" />
    <meta name="keywords" content="<?php echo $settings['keywords']; ?>" />
    <meta name="author" content="www.exchangesoftware.info">
    <link rel="icon" th:href="@{/resources/assets/images/favicon2.png}" />
    &lt;!&ndash; Bootstrap &ndash;&gt;
    <link th:href="@{/resources/assets/css/bootstrap.min.css}" rel="stylesheet" />
    &lt;!&ndash;Custom template CSS&ndash;&gt;
    <link th:href="@{/resources/assets/css/style.css}" rel="stylesheet">
    &lt;!&ndash;Custom template CSS Responsive&ndash;&gt;
    <link th:href="@{/resources/assets/webcss/site-responsive.css}" rel="stylesheet">
    &lt;!&ndash;Animated CSS &ndash;&gt;
    <link th:href="@{/resources/assets/webcss/animate.css}" rel="stylesheet">
    &lt;!&ndash;Owsome Fonts &ndash;&gt;
    <link rel="stylesheet" th:href="@{/resources/assets/font-awesome/css/font-awesome.min.css}">
    &lt;!&ndash;<link rel="stylesheet" href="assets/webcss/custom_fonts.css}">&ndash;&gt;
    &lt;!&ndash; Important Owl stylesheet &ndash;&gt;
    <link rel="stylesheet" th:href="@{/resources/assets/owlslider/owl-carousel/owl.carousel.css}">

    &lt;!&ndash; Default template &ndash;&gt;
    <link rel="stylesheet" th:href="@{/resources/assets/owlslider/owl-carousel/owl.template.css}">
   &lt;!&ndash; <?php if($lang['lang_type'] == "rtl") { ?>
    <link th:href="@{/resources/assets/css/bootstrap-flipped.min.css}" rel="stylesheet" type="text/css" media="all" />
    <link th:href="@{/resources/assets/css/bootstrap-rtl.min.css}" rel="stylesheet" type="text/css" media="all" />
    <?php } ?>&ndash;&gt;
    <script type="text/javascript" th:src="@{/resources/assets/js/jquery.js}"></script>
    <script type="text/javascript" th:src="@{/resources/assets/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/resources/assets/js/bootstrap-notify.min.js}"></script>
    <script type="text/javascript" th:src="@{/resources/assets/js/jquery.playSound.js}"></script>
    <script type="text/javascript" th:src="@{/resources/assets/js/functions.js}"></script>
    <script type="text/javascript" th:src="@{/resources/assets/js/uploader.min.js}"></script>

    <script src='https://www.google.com/recaptcha/api.js'></script>
    &lt;!&ndash;<?php
	if(checkSession()) {
		?>
    <script type="text/javascript">
        function check_n() { btc_check_notifications('<?php echo $_SESSION['btc_uid']; ?>'); }
        setInterval(check_n,3000);
    </script>
    <?php
	}
	?>&ndash;&gt;
    &lt;!&ndash; HTML5 shim and Respond.js} for IE8 support of HTML5 elements and media queries &ndash;&gt;
    &lt;!&ndash; WARNING: Respond.js} doesn't work if you view the page via file:// &ndash;&gt;
    &lt;!&ndash;[if lt IE 9]>
    &lt;!&ndash;
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js}"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js}"></script>&ndash;&gt;
    <![endif]&ndash;&gt;
</head>-->
    <body class="joblist style2  style3 title-image">
        <!-- Header Image Or May be Slider-->
        <!--<div th:fragment="htmlheaderbase"  >
            <div class="row">
                &lt;!&ndash; Header Image Or May be Slider&ndash;&gt;
                <div class="top_header">
                    <nav class="navbar navbar-fixed-top">

                        <div class="container">
                            <div class="logo">
                                <a href=""><img th:src="@{/resources/assets/images/logo2.png}" alt="logo"/></a>
                            </div>
                            <div class="logins">
                                <a href="post-ad" class="post_job"><span class="label job-type partytime"><?php echo $lang['post_ad']; ?></span></a>
                                <?php
                                            if(checkSession()) { ?>
                                <a href="logout" class="login"><i class="fa fa-sign-out"></i></a>
                                <a href="account/wallet" class="login"><i class="fa fa-user"></i></a>
                                <?php } else { ?>
                                <a href="login" class="login"><i class="fa fa-user"></i></a>
                                <?php } ?>
                            </div>
                            &lt;!&ndash; Brand and toggle get grouped for better mobile display &ndash;&gt;
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                            </div>

                            &lt;!&ndash; Collect the nav links, forms, and other content for toggling &ndash;&gt;
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li><a href="buy-bitcoins">Buy Bitcoins</a></li>
                                    <lI><a href="sell-bitcoins">Sell Bitcoins</a></li>
                                    <lI><a href="contact">Contact</a></li>

                                    &lt;!&ndash;<?php if(checkSession()) { ?>
                                    <li class="mobile-menu"><a href="account/wallet"><?php echo $lang['menu_wallet']; ?></a></li>
                                    <li class="mobile-menu"><a href="logout"><?php echo $lang['menu_logout']; ?></a></li>
                                    <?php } else { ?>
                                    <li class="mobile-menu"><a href="post-ad"><?php echo $lang['post_ad']; ?></a></li>
                                    <li class="mobile-menu"><a href="login"><?php echo $lang['login']; ?> / <?php echo $lang['register']; ?></a></li>
                                    <?php } ?>&ndash;&gt;
                                </ul>

                            </div>&lt;!&ndash; navbar-collapse &ndash;&gt;



                        </div>

                        &lt;!&ndash; container-fluid &ndash;&gt;
                    </nav>

                </div>


            </div>
        </div>-->
        <!--<div th:fragment="global-messages" class="messages">
            <div style="margin-top:10px;">

                <div class="alert alert-success" th:if="${alert_success!=null and !alert_success.empty}">
                    <p th:each="element : ${alert_success}" th:utext="${element}"><br/></p>
                </div>
                <div class="alert alert-danger" th:if="${alert_errors!=null and !alert_errors.empty}">
                    <i class="fa fa-timesl"></i> <span th:each="element : ${alert_errors}" th:utext="${element}"></span>
                </div>
                <div th:if="${alert_warnings!=null and !alert_warnings.empty}" class="alert alert-warning">
                    <span th:each="element : ${alert_warnings}" th:utext="${element}"></span>
                </div>
                <div th:if="${alert_notices!= null and !alert_notices.empty}" class="alert alert-info">
                    <span th:each="element : ${alert_notices}" th:utext="${element}"></span>
                </div>

                &lt;!&ndash;<div class="alert alert-danger" th:if="${Alerts::getErrors() != null}" th:each="errors: ${Alerts::getErrors()}"></div>
                <div class="alert alert-danger" th:each="infos: ${Alerts::getInfos()}"></div>
                <div class="alert alert-danger" th:each="successes: ${Alerts::getSuccesses()}"></div>
                <div class="alert alert-danger" th:each="warnings: ${Alerts::getWarnings()}"></div>&ndash;&gt;
            </div>

        </div>-->

        <!--<div th:fragment="htmlfooterbase" class="container-fluid footer">
            <div class="row">
                <div class="container main-container-home">
                    <div class="col-md-3">
                        <h3>Pages</h3>
                        <ul class="list-unstyled">
                            <li><a href="faq">Frequently Asked Questions</a></li>
                            <li><a href="page/terms-of-services">Terms of services</a></li>
                            <li><a href="page/privacy-policy">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h3>Languages</h3>
                        <ul class="list-unstyled">
                            <li><a href="?&lang=en">English</a></li>
                            <li><a href="?&lang=fr">French</a></li>
                        </ul>
                    </div>
                    <div class="col-md-5">
                        <h3>Follow us</h3>
                        Twitter or Facebook code here.
                    </div>
                </div>

            </div>
        </div>-->

        <!--Footer Area-->
        <!--Last Footer Area---->
        <!--<div th:fragment="htmllastfooterbase" class="container-fluid footer last-footer ">
            <div class="row">
                <div class="container main-container">
                    <div class="col-lg-9 col-md-3 col-sm-9 col-xs-6" >
                        <p class="copyright">Copyright © 2018. Developed by <a target="_blank" href="http://www.bitwiseonline.com">Bitwise Ventures</a></p>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">
                        <ul class="list-group">
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-google-plus-square"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>-->

        <div th:fragment="scriptincludebase">
            <!--Last Footer Area---->
            <input type="hidden" id="url" th:value="@{/}">
            <!-- Scripts
            ================================================== -->
            <script type="text/javascript" th:src="@{/resources/assets/js/select2.min.js}"></script>
            <!-- Html Editor -->
            <!--<script th:src="@{/resources/assets/tinymce/tinymce.min.js}"></script>-->
            <!--  parallax.js}-1.4.2  -->
            <script type="text/javascript" th:src="@{/resources/assets/parallax.js-1.4.2/parallax.js}"></script>
            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
            <!-- Include all compiled plugins (below), or include individual files as needed -->
            <script th:src="@{/resources/assets/js/bootstrap.min.js}"></script>
            <!-- Include js plugin -->
            <script type="text/javascript"
                    th:src="@{/resources/assets/owlslider/owl-carousel/owl.carousel.js}"></script>
            <script type="text/javascript" th:src="@{/resources/assets/js/waypoints.min.js}"></script>
            <script type="text/javascript" th:src="@{/resources/assets/counter/jquery.counterup.min.js}"></script>
            <!--Site JS-->
            <script th:src="@{/resources/assets/js/webjs.js}"></script>
            <script th:src="@{/resources/js/custom.js}"></script>
            <!--Custom template CSS-->


            <th:block th:if="${googleMapApi!=null}">
                <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdYN7TvWXNzbYEDzIhACtOQtd0Ck3WYtQ&libraries=places&callback=initAutocomplete"
                        async defer></script>
                <script type="text/javascript">
                    var placeSearch, autocomplete;
                    var geocoder;

                    /*var componentForm = {
                        street_number: 'short_name',
                        route: 'long_name',
                        locality: 'long_name',
                        administrative_area_level_1: 'short_name',
                        country: 'long_name',
                        postal_code: 'short_name'
                    };*/

                    function getLatLong() {
                        var address = $("#autocomplete").val();
                        geocoder.geocode({'address': address}, function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                $('#latitude').val(results[0].geometry.location.lat());
                                $('#longitude').val(results[0].geometry.location.lng());

                            }
                        });
                    }

                    function initAutocomplete() {
                        // Create the autocomplete object, restricting the search to geographical
                        // location types.
                        autocomplete = new google.maps.places.Autocomplete(
                            /** @type {!HTMLInputElement} */(document.getElementById('autocomplete')),
                            {types: ['geocode']});
                        geocoder = new google.maps.Geocoder();

                        // When the user selects an address from the dropdown, populate the address
                        // fields in the form.
                        //autocomplete.addListener('place_changed', fillInAddress);
                    }

                    /*function geolocate() {
                        if (navigator.geolocation) {
                            navigator.geolocation.getCurrentPosition(function(position) {
                                var geolocation = {
                                    lat: position.coords.latitude,
                                    lng: position.coords.longitude
                                };
                                var circle = new google.maps.Circle({
                                    center: geolocation,
                                    radius: position.coords.accuracy
                                });
                                //autocomplete.setBounds(circle.getBounds());
                            });
                        }
                    }*/
                </script>
            </th:block>
            <script type="text/javascript" th:src="@{/resources/js/g.js}"></script>
            <link rel="stylesheet" th:href="@{/resources/admin/assets/cleditor/jquery.cleditor.css}"/>
            <script th:src="@{/resources/js/jquery-confirm.js}"></script>
            <script type="text/javascript" th:src="@{/resources/admin/assets/cleditor/jquery.cleditor.min.js}"></script>
            <link rel="stylesheet" th:href="@{/resources/css/jquery-confirm.css}"/>
            <script>

                $(document).ready(function () {
                    $(".cleditor").cleditor({
                        controls: // controls to add to the toolbar
                            "bold italic underline color " /*+
                "style | color highlight removeformat | bullets numbering | outdent " +
                "indent | alignleft center alignright justify | undo redo | " +
                "rule link unlink | cut copy paste pastetext"*/,
                    });

                });

                var askConfirmation = true;
                $(".form").on("submit", function (event) {
                    if (askConfirmation == true) {
                        event.preventDefault();
                        var ele = $(this);
                        $.confirm({
                            title: 'Confirm!',
                            content: 'Are you sure you want to perform this action ?',
                            buttons: {
                                confirm: {
                                    btnClass: 'btn-blue',
                                    action: function () {
                                        askConfirmation = false;
                                        ele.submit();
                                        return true;
                                    }
                                },
                                cancel: {
                                    btnClass: 'btn-default',
                                    action: function () {
                                        askConfirmation = true;
                                        $.alert("Cancelled")
                                    }
                                }
                            }
                        });
                    }
                });
                $(".delete").on("click", function (event) {

                    event.preventDefault();
                    var ele = $(this);
                    $.confirm({
                        title: '',

                        icon: 'fa fa-warning btn-danger btn',
                        content: 'Are you sure you want to perform this action ?<br/>It will also delete child elements.<br/><span style="color:#d43f3a;">Please cancel if you are not sure what you are doing.</span>',
                        buttons: {
                            confirm: {
                                btnClass: 'btn-blue',
                                action: function () {
                                    window.location.href = ele.attr('href');
                                    return true;
                                }
                            },
                            cancel: {
                                btnClass: 'btn-default',
                                action: function () {
                                    $.alert("Action Cancelled")
                                }
                            }
                        }
                    });

                });


                function noPage(p) {
                    $.confirm({
                        title: '',

                        icon: 'fa fa-warning btn-danger btn',
                        content: 'There is no ' + p + ' page',
                        animationBounce: 2.5,
                        buttons: {
                            ok: {
                                btnClass: 'btn-blue',

                                action: function () {
                                }
                            },
                        }
                    });
                }


                var waitingDialog = waitingDialog || (function ($) {
                    'use strict';

                    // Creating modal dialog's DOM
                    var $dialog = $(
                        '<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
                        '<div class="modal-dialog modal-m">' +
                        '<div class="modal-content" style="background: transparent;border:none;">' +
                        '<div class="modal-body" style="text-align: center;">' +
                        '<img class="fa fa-bitcoin  faa-flash animated fa-5x " style="color:white;" src="/resources/assets/images/favicon.png"></img>' +
                        '</div>' +
                        '</div></div></div>');

                    return {
                        /**
                         * Opens our dialogfav
                         * @param message Custom message
                         * @param options Custom options:
                         *                  options.dialogSize - bootstrap postfix for dialog size, e.g. "sm", "m";
                         *                  options.progressType - bootstrap postfix for progress bar type, e.g. "success", "warning".
                         */
                        show: function (message, options) {
                            // Assigning defaults
                            if (typeof options === 'undefined') {
                                options = {};
                            }
                            if (typeof message === 'undefined') {
                                message = 'Loading';
                            }
                            var settings = $.extend({
                                dialogSize: 'm',
                                progressType: '',
                                onHide: null // This callback runs after the dialog was hidden
                            }, options);

                            // Configuring dialog
                            $dialog.find('.modal-dialog').attr('class', 'modal-dialog').addClass('modal-' + settings.dialogSize);
                            $dialog.find('.progress-bar').attr('class', 'progress-bar');
                            if (settings.progressType) {
                                $dialog.find('.progress-bar').addClass('progress-bar-' + settings.progressType);
                            }
                            $dialog.find('h3').text(message);
                            // Adding callbacks
                            if (typeof settings.onHide === 'function') {
                                $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                                    settings.onHide.call($dialog);
                                });
                            }
                            // Opening dialog
                            $dialog.modal();
                        },
                        /**
                         * Closes dialog
                         */
                        hide: function () {
                            $dialog.modal('hide');
                        }
                    };

                })(jQuery);
                waitingDialog.hide();
            </script>

            <th:block sec:authorize="isAuthenticated()">
                <script type="text/javascript">
                    var notificationClient = null;
                    document.addEventListener("DOMContentLoaded", function () {
                        webNotificationConnection();
                    });

                    function webNotificationConnection() {
                        var notificationSocket = new SockJS('/notification');
                        notificationClient = Stomp.over(notificationSocket);
                        notificationClient.connect({}, function (frame) {
                            //setConnected(true);
                            console.log('Connected: ' + frame);
                            notificationClient.subscribe('/user/queue/notification', function (messageOutput) {
                                showNotification(messageOutput.body);
                            });
                            notificationClient.send("/app/notification", {}, JSON.stringify({
                                'from': "",
                                'text': "",
                                'recipient': "",
                                'tradeId': ""
                            }));
                        });

                    }

                    document.addEventListener('DOMContentLoaded', function () {
                        if (Notification.permission !== "granted") {
                            Notification.requestPermission();
                        }
                    });

                    function showNotification(messageOutput) {
                        if (fcs == 0 && blinking==0 && chatblinking==0)
                            blinkFavicon();

                        messageOutput = JSON.parse(messageOutput);
                        notifyMe(messageOutput);
                        changeTradeStatus(messageOutput.tradeId)
                        $.notify({
                            // options
                            icon: 'fa fa-check',
                            title: 'CrypKart Alert',
                            message: messageOutput.message.replace(/\n/g, "<br />"),
                            url: messageOutput.url,
                            target: '_blank'
                        }, {
                            // settings
                            element: 'body',
                            position: null,
                            type: "success",
                            allow_dismiss: true,
                            newest_on_top: true,
                            showProgressbar: false,
                            placement: {
                                from: "top",
                                align: "right"
                            },
                            offset: 20,
                            spacing: 10,
                            z_index: 1208,
                            delay: 5000,
                            timer: 10000000 ,
                            url_target: '',
                            mouse_over: null,
                            animate: {
                                enter: 'animated fadeInDown',
                                exit: 'animated fadeOutUp'
                            },
                            onShow: null,
                            onShown: null,
                            onClose: null,
                            onClosed: null,
                            icon_type: 'class',
                            template: '<div data-notify="container" class="live-notification col-xs-11 col-sm-2 alert"  role="alert">' +
                            '<div  class="alert alert-success notification-alert">' +
                            '<div class="panel-heading">' +
                            '<span data-notify="title">{1}</span> ' +
                            '<button type="button" aria-hidden="true"  data-notify="dismiss" class="btn btn-info btn-circle"><i class="glyphicon glyphicon-remove"></i></button>' +
                            '</div>' +
                            '<div class="panel-body">' +
                            '<span data-notify="message">{2}</span>' +
                            '</div>' +
                            '</div>' +
                            '<a href="{3}" target="{4}" data-notify="url"></a>' +
                            '</div>'
                            ,
                            /*template: '<div style="font-size:15px;" data-notify="container" class="live-notification col-xs-11 col-sm-2 alert alert-{0}" role="alert">' +
                            '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>' +
                            '<span data-notify="icon"></span> ' +
                            '<span data-notify="title">{1}</span> ' +
                            '<span data-notify="message">{2}</span>' +
                            '<div class="progress" data-notify="progressbar">' +
                            '<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                            '</div>' +
                            '<a href="{3}" target="{4}" data-notify="url"></a>' +
                            '</div>'*/
                        });

                    }

                    document.addEventListener('DOMContentLoaded', function () {
                        if (!Notification) {
                            return;
                        }

                        if (Notification.permission !== "granted")
                            Notification.requestPermission();
                    });

                    function notifyMe(msg) {
                        if (Notification.permission !== "granted")
                            Notification.requestPermission();
                        else {
                            var notification = new Notification('CrypKart Alert', {
                                icon: '/resources/assets/images/favicongray.png',
                                body: msg.message,
                                tag: 'greeting-notify',
                                dir : 'rtl'
                            });
                            notification.onclick = function () {
                                window.open(msg.url);
                            };
                        }
                    }

                    var icn = "icons/faviconred.png";
                    var fcs = 1;
                    var blinking=0;
                    var chatblinking=0;
                    function blinkFavicon() {
                        if (fcs == 0) {
                            $("#favicon").attr("href", "/resources/assets/"+icn);
                            if (icn != "icons/faviconred.png")
                                icn =  "icons/faviconred.png";
                            else
                                icn = "images/favicongray.png";
                            window.setTimeout(blinkFavicon, 500);
                        }
                    }

                    $(window).on("blur focus", function (e) {
                        var prevType = $(this).data("prevType");
                        if (prevType != e.type) {   //  reduce double fire issues
                            switch (e.type) {
                                case "blur":
                                    fcs = 0;
                                    blinking=0;
                                    chatblinking=0;

                                    //blinkFavicon();
                                    break;
                                case "focus":
                                    fcs = 1;

                                    blinking=1;
                                    chatblinking=1;
                                    $("#favicon").attr("href", "/resources/assets/images/favicongray.png");
                                    break;
                            }
                        }
                        $(this).data("prevType", e.type);
                    })
                </script>

            </th:block>

            <link th:href="@{/resources/assets/css/style.css}" rel="stylesheet">
        </div>

        <!-- Scripts
        ================================================== -->
    </body>
</html>